<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Painel de Avisos</title>

  <!-- CSS GLOBAL -->
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="shortcut icon" href="/static/imagens/favicon.ico.png" type="image/x-icon">
</head>

<body>

  <!-- AVISO GLOBAL -->
  <% if (avisosAtivos && avisosAtivos.length > 0) { %>
    <div class="aviso-global aviso-ativo">
      <span class="aviso-icon">‚ö†Ô∏è</span>
      <span class="aviso-texto">
        <%= avisosAtivos[0].mensagem %>
      </span>
    </div>
  <% } %>

  <main class="painel-container">

    <h1>Painel de Avisos</h1>

    <!-- FORMUL√ÅRIO -->
    <section class="form-aviso">
      <h2>Novo Aviso</h2>

      <form action="/cpd/novo" method="POST">
        <label for="mensagem">Mensagem</label>
        <input type="text" id="mensagem" name="mensagem" required>

        <button type="submit">Criar Aviso</button>
      </form>
    </section>

    <!-- TABELA -->
    <table class="table-avisos">
      <thead>
        <tr>
          <th>ID</th>
          <th>Mensagem</th>
          <th>Status</th>
          <th>A√ß√µes</th>
        </tr>
      </thead>
      <tbody>
        <% avisos.forEach(aviso => { %>
          <tr>
            <td><%= aviso.id %></td>
            <td><%= aviso.mensagem %></td>

            <!-- STATUS -->
            <td>
              <% if (aviso.ativo) { %>
                <span class="badge-ativo">ATIVO</span>
              <% } else { %>
                <span class="badge-inativo">INATIVO</span>
              <% } %>
            </td>

            <!-- A√á√ïES -->
            <td>
              <form action="/cpd/toggle/<%= aviso.id %>" method="POST" style="display:inline;">
                <% if (aviso.ativo) { %>
                  <button class="btn btn-desativar" type="submit">Desativar</button>
                <% } else { %>
                  <button class="btn btn-ativar" type="submit">Ativar</button>
                <% } %>
              </form>

              <form action="/cpd/deletar/<%= aviso.id %>" method="POST" style="display:inline;">
                <button class="btn btn-excluir" type="submit">Excluir</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>

    <!-- VOLTAR -->
    <div class="btn-login" style="margin-top: 30px;">
      <a href="/index" class="btn-voltar">Voltar ao CPD</a>
    </div>

  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <p class="linha-email">
      üìß Email:
      <a href="mailto:cpdcaxiasdosul@atacadao.com.br">
        cpdcaxiasdosul@atacadao.com.br
      </a>

      <span class="logo-animada">
        <img src="/static/imagens/logocpd284.png" alt="Logo CPD 284">
      </span>
    </p>

    <p>
      ¬©Copy 2025/2026 ‚Äì CPD 284 ‚Ä¢ Desenvolvido por:
      <a href="https://github.com/Iamjordana" target="_blank">Jordana Medeiros</a>
      ‚Ä¢ Vers√£o: 1.0
    </p>
  </footer>

</body>
</html>
